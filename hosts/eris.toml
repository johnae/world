system = "x86_64-linux"

[config]
publicKey = "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIH1j+f+Y4nOQvyLq1B9YiB2LxR/ttmK2TTHVEEFX/3ST"
syncthingDeviceID = "ZL2OU7Q-IRYWF7H-VNX6A65-RHWQXIF-AK2G22Y-KB43E2U-DAMNCFP-66IWKQX"

virtualisation.libvirtd.enable = true
boot.binfmt.emulatedSystems = [ "aarch64-linux" ]

environment.state."/keep".directories = [
  "/var/lib/libvirt",
]

profiles = [
  "profiles/hardware/usbcore",
  "profiles/hardware/x570",
  "profiles/default_fs",
  "profiles/desktop",
  "profiles/hidpi",
  "profiles/home-manager",
  "profiles/homedns",
  "profiles/interception-tools",
  "profiles/pcscd",
  "profiles/state",
  "profiles/syncthing",
  "profiles/tailscale",
  "profiles/zram",
]

age.secrets.spotnix = { file = "secrets/spotnix.age", owner = "1337" }
age.secrets.spotifyd = { file = "secrets/spotifyd.age", owner = "1337" }
age.secrets.wifi-networks.file = "secrets/wifi-networks.age"
age.secrets.wg-home.file = "secrets/eris/wg-home.age"
age.secrets.wg-net.file = "secrets/eris/wg-net.age"
age.secrets.id_ed25519_agenda_updater = { file = "secrets/id_ed25519_agenda_updater.age", owner = "1337" }
age.secrets.id_ed25519_bbph = { file = "secrets/id_ed25519_bbph.age", owner = "1337", path = "/home/john/.ssh/id_ed25519_bbph" }
age.secrets.syncthing-cert = { file = "secrets/eris/syncthing-cert.age", owner = "1337" }
age.secrets.syncthing-key = { file = "secrets/eris/syncthing-key.age", owner = "1337" }

services.syncthing.enable = true
services.syncthing.devices.SM-G998B.id = "PCFNIXF-AR7YX2B-354IJQW-YP25QM7-N53ES5L-HKB337S-I6JZV34-55LQEAR"
services.syncthing.user = "john"
services.syncthing.group = "users"
services.syncthing.openDefaultPorts = true
services.syncthing.folders."/home/john/Sync".id = "sync"
services.syncthing.folders."/home/john/Sync".devices = [
  "triton",
  "polaris",
  "icarus"
]
services.syncthing.folders."/home/john/Photos".id = "sm-g998b_7dxn foton"
services.syncthing.folders."/home/john/Photos".devices = [
  "triton",
  "polaris",
  "icarus",
  "SM-G998B"
]

services.syncthing.cert = "/run/agenix/syncthing-cert"
services.syncthing.key = "/run/agenix/syncthing-key"
services.syncthing.dataDir = "/home/john/.local/share/syncthing-data"

services.innernet.client.insane.enable = true
services.innernet.client.insane.settings.interface = { address = "192.168.104.65/22", privateKeyFile = "/run/agenix/wg-home" }
services.innernet.client.insane.settings.server = { publicKey = "Ca4OCVKasunoIVyh3vbp/HyLnrPWp7AOwEuV14PS1QY=", externalEndpoint = "65.108.2.146:51820", internalEndpoint = "192.168.104.1:51820" }

users.groups.john.gid = 1337
users.users.john.uid = 1337
users.users.john.shell = "fish"
users.users.john.hashedPassword = "$6$RG3QgdVr6A5s524$FRVNXOYWYCNXf6cH/gV4u7g6sffffznBnbXZGHysuWVHGYPpeLfuDuXEJHK.KUrkVCfPXFTTsCLJaj2Q6ATkC1"

home-manager.users.john.programs.rbw.settings.device_id = "f3268147-1e9d-46da-b431-11fe011f5dfe"

home-manager.users.john.userinfo.email = "john@insane.se"
home-manager.users.john.userinfo.fullName = "John Axel Eriksson"
home-manager.users.john.userinfo.githubUser = "johnae"
home-manager.users.john.userinfo.gitlabUser = "johnae"
home-manager.users.john.userinfo.gitIdMap."~/Development/planhat/" = "john.eriksson@planhat.com"
home-manager.users.john.profiles = [
  "users/profiles/alacritty",
  "users/profiles/bat",
  "users/profiles/chromium",
  "users/profiles/dconf",
  "users/profiles/emacs",
  "users/profiles/firefox",
  "users/profiles/fish",
  "users/profiles/git",
  "users/profiles/i3status-desktop",
  "users/profiles/kanshi",
  "users/profiles/mako",
  "users/profiles/obs",
  "users/profiles/pueue",
  "users/profiles/qutebrowser",
  "users/profiles/rbw",
  "users/profiles/rofi",
  "users/profiles/spotifyd",
  "users/profiles/spotnix",
  "users/profiles/ssh",
  "users/profiles/starship",
  "users/profiles/sway",
  "users/profiles/tmux",
  "users/profiles/wlsunset",
]